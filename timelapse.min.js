/* timelapse.js - by enki - https://enkimute.github.io */
!function(e,n,r){"undefined"!=typeof module&&module.exports?module.exports=r():"function"==typeof define&&define.amd?define(e,r):n[e]=r()}("timelapse",this,function(){function e(){for(var e=n[r++],t=o[e],a=e&255>>t+1;t--;)a=256*a+n[r++];return a}var n,r,t,a,o=Array.apply([],{length:256}).map(function(e,n){return 7-Math.max(0,Math.floor(Math.log2(n)))});return function(o,f,i){var u=new FileReader;u.onload=function(){for(n=new Uint8Array(this.result),r=t=0,a=0;r<n.byteLength;){var o=e(),u=e();switch(o){case 103:for(var d=Math.round(1e3/f*t);u--;)n[r++]=d>>8*u&255;a=0;break;case 35:e();var d=Math.round(1e3/f*a);n[r++]=d>>8,n[r++]=255&d,r+=u-3,t++,a++;break;default:72057594037927940!=u&&(r+=u)}}i&&i(new Blob([n],{type:"video/webm"}))},o instanceof Array&&(o=new Blob(o,{type:"video/webm"})),u.readAsArrayBuffer(o)}});